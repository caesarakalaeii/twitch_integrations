<!DOCTYPE html>
<html>

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Credits</title>
  <link rel="stylesheet" href="/content/style.css" />
  <noscript>
    <% let msg = 0; %>
    <% function oddEven() { return msg++ % 2 ? 'odd' : 'even' }; %>
  </noscript>
  <script>
    function pageScroll() {
      window.scrollBy(0,1);
      scrolldelay = setTimeout(pageScroll,10);
    }
    window.addEventListener('DOMContentLoaded', function() {
      pageScroll()
    })
  </script>
</head>

<body>
  <div class="header rainbow">Thanks for watching!</div>

  <% if (newSubs?.length) { %>
  <div class="list_title">Gifted Subs:</div>
  <div class="list_container ranking">
    <% gifted.sort((a, b) => b.amount - a.amount).forEach(function(event) { %>
      <div class="list_item message <%= oddEven() %>">
        <span class="username">
          <%= event.user %>
        </span>
        <span class="amount">
          <%= event.amount %>
        </span>
      </div>
    <% }) %>
  </div>
  <% } %>

  <% if (newSubs?.length){%>
  <div class="list_title">New Subscriptions:</div>
  <div class="list_container" id="new_subs">
    <% newSubs.forEach(function(event) { %>
      <div class="list_item message <%= oddEven() %>">
        <span class="username">
          <%= event %>
        </span>
      </div>
    <% }) %>
  </div>
  <% } %>

  <% if (currentSubs?.length){%>
  <div class="list_title">Current Subscribers:</div>
  <p class="list_no_break">
    <% currentSubs.forEach(function(user, index) { %>
      <span class="comma_separated"><%= user %></span>
    <% }) %>
  </p>
  <% } %>

  <% if (cheers?.length){%>
  <div class="list_title">Cheers:</div>
  <div class="list_container">
    <% cheers.sort((a, b) => b.amount - a.amount).forEach(function(event) { %>
      <div class="list_item">
        <img class="inline-icon" src="/content/diamond.png">
        <span class="amount"><%= event.amount %></span>
        <span class="username"><%= event.user %></span>
        <div class="vert_container">
          <% event.messages.forEach(function(m) { %>
            <div class="message <%= oddEven() %>"><%= m %></div>
          <% }) %>
        </div>
      </div>
    <% }) %>
  </div>
  <% } %>

  <% if (raids?.length) { %>
    <div class="list_title">Thanks to the Raiders:</div>
    <div class="list_container">
      <% raids.sort((a, b) => b.amount - a.amount).forEach(function(event) { %>
        <div class="list_item message <%= oddEven() %>">
          <span class="username">
            <%= event.user %>
          </span>
          <span class="amount">
            <%= event.amount %>
          </span>
        </div>
      <% }) %>
    </div>
  <% } %>

  <% if (redeems?.length){%>
  <div class="list_title">Redeems:</div>
  <div class="list_container">
    <% redeems.forEach(function(event) { %>
      <div class="list_item">
        <span class="username">
          <%= event.user %>
        </span>
        <span class="message <%= oddEven() %>">
          <%= event.message %>
        </span>
      </div>
    <% }) %>
  </div>
  <% } %>

  <% if (follows?.length){%>
  <div class="list_title">Follows:</div>
  <p class="list_no_break">
    <% follows.forEach(function(user, index) { %>
      <span class="comma_separated"><%= user %></span>
    <% }) %>
    </p>
  <% } %>

  <div class="closure rainbow">Sweet dreams of sour pickles</div>
  <div class="credit_where_credit_is_due">Developed by Kouna and CaesarLP</div>
</body>

</html>